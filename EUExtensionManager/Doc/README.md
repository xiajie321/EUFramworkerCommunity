# EU 拓展管理器

统一管理 EUFarmworker 框架所有拓展插件的工具。

## 功能特性

### 已安装管理

- 查看所有本地安装的拓展列表
- 实时显示已安装数量
- 显示版本更新提示（Update 徽章）
- 支持查看文档、定位文件夹、卸载等操作

### 社区仓库

- 浏览远程社区仓库中的所有可用拓展
- 显示已安装状态（Installed 徽章）
- 一键下载安装新拓展
- 智能目录匹配（支持文件夹名与扩展名不一致的情况）

### 版本管理

- 自动检测可更新的拓展
- 显示版本对比（本地版本 → 远程版本）
- 一键更新到最新版本

### 依赖管理

- 显示拓展的依赖项列表
- 绿色标签表示已安装的依赖
- 红色标签表示未安装，点击可直接下载
- 支持自动下载外部 GitHub 仓库依赖到指定目录
- 支持递归安装依赖链

### 核心框架支持

- 自动识别核心框架组件（Category 为"框架"的拓展）
- 支持将核心组件安装到独立的核心路径
- 核心路径下的组件也会被识别为特殊的本地拓展

### 搜索与筛选

- 支持按名称、包名、描述搜索
- 支持按分类（Category）筛选列表
- 支持按名称或更新状态排序列表

## 使用方法

### 打开管理器

菜单栏：**EUFarmworker → 拓展管理器**

### 界面说明

#### 左侧边栏

- **已安装**：查看本地已安装的拓展（显示数量）
- **社区仓库**：浏览远程可用的拓展（显示数量）
- **设置**：配置仓库地址和安装路径

#### 主内容区

- **顶部**：标题、搜索框、刷新按钮
- **左侧列表**：拓展列表，带图标、名称、版本、描述
- **右侧详情**：选中拓展的详细信息和操作按钮

### 操作按钮

| 按钮  | 说明              |
| --- | --------------- |
| 安装  | 从社区仓库下载并安装拓展    |
| 更新  | 更新到最新版本（有新版时显示） |
| 文档  | 打开拓展的文档文件       |
| 定位  | 在文件管理器中打开拓展目录   |
| 卸载  | 删除拓展（需确认）       |

## 设置选项

### 社区仓库地址

默认：`https://gitee.com/xiajie234/EUFramworkerCommunity`

支持 GitHub 和 Gitee 仓库地址：

- **Gitee**（推荐国内用户）: `https://gitee.com/user/repo`
- **GitHub**: `https://github.com/user/repo`

### 插件安装路径

默认：`Assets/EUFarmworker/Extension`

普通拓展插件的默认安装位置。

### 核心安装路径

默认：`Assets/EUFarmworker/Core/MVC`

核心框架组件的默认安装位置。

## 创建自己的拓展

每个拓展需要在根目录包含 `extension.json` 文件：

```json
{
  "name": "com.yourname.extension-name",
  "displayName": "拓展显示名称",
  "version": "1.0.0",
  "description": "拓展描述",
  "author": "作者名称",
  "category": "分类名称",
  "dependencies": [
    {
      "name": "com.eu.core",
      "gitUrl": "https://github.com/user/repo",
      "installPath": "Assets/EUFarmworker/Core"
    }
  ]
}
```

### 字段说明

| 字段           | 必需  | 说明                                      |
| ------------ | --- | --------------------------------------- |
| name         | 是   | 唯一标识符，建议使用反向域名格式                        |
| displayName  | 是   | 显示在列表中的名称                               |
| version      | 是   | 版本号，格式：主版本.次版本.修订版本                      |
| description  | 是   | 简短描述                                    |
| author       | 否   | 作者名称                                    |
| category     | 否   | 分类。若设为"框架"，默认安装到核心路径；否则安装到插件路径          |
| dependencies | 否   | 依赖列表，包含 name, gitUrl (GitHub 地址), installPath (安装路径) |

### 依赖项配置详解

`dependencies` 数组中的每个对象可以包含以下字段：

- **name**: 依赖项的包名（必需）。
- **gitUrl**: 依赖项所在的 GitHub 仓库地址（可选，用于自动下载）。
- **installPath**: 依赖项的安装路径（可选）。
    - 如果指定了路径，将安装到该路径。
    - 如果留空，管理器会下载并读取依赖包的 `extension.json`。若依赖包的 `category` 为"框架"，则安装到核心路径；否则安装到插件路径。

### 推荐目录结构

```
YourExtension/
├── extension.json      # 必需：拓展描述文件
├── Script/             # C# 脚本
├── ConfigPanel/        # UI 样式文件
├── Doc/                # 文档目录
│   └── README.md       # 使用说明
└── Example/            # 示例
    ├── Scenes/
    └── Script/
```

## 发布到社区仓库

1. Fork 社区仓库
2. 在根目录创建你的拓展文件夹
3. 确保包含 `extension.json`
4. 提交 Pull Request

## 更新日志

### v1.2.2

- 优化文档说明
- 修复已知问题

### v1.2.0

- 添加侧边栏数量统计
- 优化加载速度（本地列表立即显示）
- 智能目录匹配（解决文件夹名与包名不一致问题）
- 修复已安装拓展在社区仓库显示为未安装的问题
- 改进查找本地扩展的匹配逻辑

### v1.1.0

- 添加社区仓库浏览功能
- 支持一键安装/更新
- 添加依赖管理
- 改进 UI 动画效果

### v1.0.0

- 初始版本
- 基础的拓展列表管理
- 文档查看和文件定位功能
